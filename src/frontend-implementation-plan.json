{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Stabilize deployed hash-routed navigation, custom-domain validation UX, and logo asset fallback",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Harden the deployed hash-based navigation and admin auth flow across all existing routes.",
      "acceptanceCriteria": [
        "A live deployment URL is available and loads the site successfully in a new browser session.",
        "Visiting each route via hash URLs (/#/, /#/about, /#/projects, /#/gallery, /#/contact, /#/admin-login) renders without 404 errors.",
        "Deep linking and browser refresh on any hash route continue to work after deployment.",
        "Admin authentication flow still works post-deployment (admin-login page, login, redirect to admin dashboard, logout)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Add an explicit router-level not-found handling experience (within the existing hash-based routing setup) that renders a user-friendly page (with links back to existing routes) instead of a blank screen when an unknown hash route is visited after deployment."
        },
        {
          "path": "frontend/src/contexts/AuthContext.tsx",
          "operation": "modify",
          "description": "Make admin session persistence more resilient post-deployment by validating and normalizing stored auth state on load (sessionStorage/localStorage access failures handled gracefully) while keeping the current credential model unchanged."
        },
        {
          "path": "frontend/DEPLOYMENT.md",
          "operation": "modify",
          "description": "Update the deployment verification checklist to explicitly cover: hash deep-link testing for each required route, refresh testing, and the full admin login -> dashboard -> logout flow in a new browser session, using English-only instructions."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Accept fully-qualified custom domains with dots or provide a clear English validation message with examples.",
      "acceptanceCriteria": [
        "Entering a standard domain with dots (e.g., www.uthaansewasamiti.org) no longer fails validation OR the UI clearly instructs the user on the required domain format with an English error message.",
        "If restrictions remain (letters/numbers/hyphens only), the UI provides an explicit example of an acceptable input and explains that dots are not allowed (and why)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/domainValidation.ts",
          "operation": "create",
          "description": "Create a focused custom-domain validation utility that supports fully qualified domain names containing dots (labels separated by dots), enforces length limits, and returns English-only, user-facing validation messages (including an example input)."
        },
        {
          "path": "frontend/src/pages/AdminPage.tsx",
          "operation": "modify",
          "description": "Wire the domain validation into the existing admin experience by adding (or updating) a publish/custom-domain input area within the Admin Dashboard UI that uses the shared validation utility and displays the English validation message inline when invalid (no new top-level routes/pages)."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Ensure the generated header logo asset is deployed, and add a robust fallback if it is missing.",
      "acceptanceCriteria": [
        "In the deployed site, the header logo does not render as a broken image.",
        "If the generated logo asset exists, it loads successfully from the deployed frontend canister.",
        "If the generated logo asset is missing, the header shows a non-broken fallback (e.g., text mark or placeholder) and remains visually aligned."
      ],
      "file_operations": [
        {
          "path": "frontend/public/assets/generated/uthaan-logo-transparent.dim_200x200.png",
          "operation": "create",
          "description": "Ensure the generated logo asset is present at the exact deployed static asset path: frontend/public/assets/generated/uthaan-logo-transparent.dim_200x200.png."
        },
        {
          "path": "frontend/src/components/Header.tsx",
          "operation": "modify",
          "description": "Add a safe runtime fallback for the logo <img> that detects load failure and renders a non-broken alternative (e.g., a styled text mark or placeholder) while preserving alignment and spacing."
        },
        {
          "path": "frontend/src/components/Footer.tsx",
          "operation": "modify",
          "description": "Apply the same safe logo rendering strategy used in the header so the footer logo never displays as a broken image when the asset is missing or fails to load."
        }
      ]
    }
  ]
}